!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react"),require("prop-types"),require("@gameworkers/react-simple-maps"),require("redux-tooltip"),require("redux"),require("next-redux-wrapper")):"function"==typeof define&&define.amd?define(["react","prop-types","@gameworkers/react-simple-maps","redux-tooltip","redux","next-redux-wrapper"],t):"object"==typeof exports?exports.ChapterMapComponent=t(require("react"),require("prop-types"),require("@gameworkers/react-simple-maps"),require("redux-tooltip"),require("redux"),require("next-redux-wrapper")):e.ChapterMapComponent=t(e.React,e.PropTypes,e.ReactSimpleMaps,e.ReduxTooltip,e.Redux,e.NextReduxWrapper)}("undefined"!=typeof self?self:this,function(e,t,r,n,a,o){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,r),a.l=!0,a.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)r.d(n,a,function(t){return e[t]}.bind(null,a));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/dist",r(r.s=6)}([function(t,r){t.exports=e},function(e,r){e.exports=t},function(e,t){e.exports=r},function(e,t){e.exports=n},function(e,t){e.exports=a},function(e,t){e.exports=o},function(e,t,r){"use strict";r.r(t);var n=r(0),a=r.n(n),o=r(1),i=r.n(o),c=r(2),l=r(5),s=r.n(l),u=r(3);var p="#e5261a";function d(e){var t=e.fill,r=e.stroke,n=e.strokeWidth;return a.a.createElement("path",{fill:t,stroke:r,strokeWidth:n,d:"\n        M-78.736,56.784c-89.734,0-162.725,73.003-162.725,162.732c0,36.571,25.572,94.673,76.01,172.686\n        c36.714,56.783,73.96,104.287,74.33,104.75c2.985,3.807,7.553,6.018,12.379,6.018c4.829,0,9.396-2.211,12.381-6.018\n        c0.37-0.463,37.622-47.971,74.33-104.75c50.438-78.013,76.012-136.121,76.012-172.686\n        C83.993,129.787,10.999,56.784-78.736,56.784z\n        M-140.173,241.81c-3.481,2.971-7.626,5.503-12.439,7.6\n        c-4.804,2.094-10.303,3.146-16.504,3.146c-5.293,0-10.114-0.871-14.47-2.616c-4.357-1.741-8.101-4.16-11.226-7.259\n        c-3.136-3.098-5.571-6.775-7.311-11.037c-1.742-4.259-2.616-8.903-2.616-13.936v-0.197c0-4.838,0.89-9.372,2.662-13.602\n        c1.772-4.222,4.248-7.937,7.405-11.131c3.16-3.193,6.909-5.712,11.234-7.55c4.317-1.839,9.061-2.758,14.228-2.758\n        c3.033,0,5.791,0.208,8.28,0.631c2.481,0.417,4.787,1.016,6.916,1.788c2.136,0.776,4.128,1.745,6.002,2.907\n        c1.876,1.158,3.682,2.481,5.421,3.966l-9.391,11.327c-1.291-1.098-2.583-2.067-3.868-2.906c-1.293-0.834-2.63-1.548-4.018-2.126\n        c-1.395-0.583-2.891-1.033-4.507-1.356c-1.614-0.322-3.387-0.484-5.316-0.484c-2.717,0-5.247,0.565-7.603,1.697\n        c-2.354,1.13-4.419,2.651-6.2,4.562c-1.771,1.906-3.158,4.139-4.158,6.692c-1.001,2.555-1.498,5.289-1.498,8.2v0.193\n        c0,3.104,0.497,5.968,1.498,8.588c1,2.617,2.418,4.898,4.263,6.838c1.835,1.941,4,3.44,6.481,4.513\n        c2.481,1.068,5.247,1.598,8.28,1.598c5.545,0,10.226-1.366,14.03-4.096v-9.749h-14.999v-12.872h29.423V241.81z\n        M-51.398,251.879\n        h-12.977l-15.29-44.337l-15.299,44.337h-12.974l-23.13-68.245h15.969l14.038,45.883l15.195-46.077h12.779l15.195,46.077\n        l14.039-45.883h15.58L-51.398,251.879z\n        M38.676,235.323c-1.395,3.81-3.381,6.988-5.956,9.536\n        c-2.585,2.553-5.712,4.455-9.39,5.711c-3.68,1.26-7.777,1.887-12.298,1.887c-9.099,0-16.262-2.517-21.49-7.551\n        c-5.224-5.033-7.839-12.55-7.839-22.554v-38.718h14.905v38.333c0,5.549,1.291,9.729,3.876,12.532\n        c2.575,2.809,6.161,4.217,10.744,4.217c4.579,0,8.161-1.359,10.746-4.07c2.575-2.71,3.868-6.775,3.868-12.194v-38.817h14.912\n        v38.234C40.755,227.032,40.061,231.518,38.676,235.323z\n      "})}function h(e){var t=e.children,r=e.forceGrayscale,n=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,["children","forceGrayscale"]);return a.a.createElement(a.a.Fragment,null,a.a.createElement("defs",null,a.a.createElement("filter",{id:"grayscale"},a.a.createElement("feColorMatrix",{type:"saturate",values:"0"})),a.a.createElement("pattern",{id:"redpattern",patternUnits:"userSpaceOnUse",width:"8",height:"8"},a.a.createElement("rect",{style:{opacity:.7},width:"8",height:"8",fill:p})),a.a.createElement("pattern",{id:"lessredpattern",patternUnits:"userSpaceOnUse",width:"8",height:"8"},a.a.createElement("rect",{style:{opacity:.3},width:"8",height:"8",fill:p})),a.a.createElement("pattern",{id:"hardlyredpattern",patternUnits:"userSpaceOnUse",width:"8",height:"8"},a.a.createElement("rect",{style:{opacity:.04},width:"8",height:"8",fill:p})),a.a.createElement("g",{id:"mapmarker"},a.a.createElement("rect",{x:"-218.979",y:"163.179",fill:"#fff",width:"279.333",height:"106.667"}),a.a.createElement("g",null,a.a.createElement(d,{stroke:"#fff",strokeWidth:20}),a.a.createElement(d,null)))),a.a.createElement("g",{filter:r?"url(#grayscale)":void 0},a.a.cloneElement(t,n)))}h.propTypes={children:i.a.element.isRequired,forceGrayscale:i.a.bool};var f=h;function m(){return(m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var y=function(e){var t,r;function n(){return e.apply(this,arguments)||this}return r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r,n.prototype.render=function(){var e=this.props,t=e.marker,r=e.scale,n=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,["marker","scale"]);return a.a.createElement(c.Marker,m({key:t.name,marker:t},n),a.a.createElement("g",{style:{cursor:"pointer"},transform:"scale("+r+"), translate(79, -528)"},a.a.createElement("use",{href:"#mapmarker"})))},n}(n.PureComponent);y.propTypes={marker:i.a.shape({name:i.a.string.isRequired,coordinates:i.a.arrayOf(i.a.number).isRequired}).isRequired,scale:i.a.number.isRequired},y.defaultProps={scale:.09};var g=y,v=r(4),b={title:"With Redux Tooltip"},k=function(e,t){return void 0===e&&(e=b),t.type,e};function M(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){w(e,t,r[t])})}return e}function w(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function E(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}a.a.PropTypes=i.a;var O,x,C,j="https://gameworkers.github.io/data/third_party/world-50m.json",_="https://gameworkers.github.io/data/third_party/world-110m.json",R="https://gameworkers.github.io/data/members.json";var q=["ABBREV","CONTINENT","FORMAL_EN","ISO_A2","ISO_A3","NAME","NAME_LONG"];var L=function(e){var t,r;function n(t){var r;return(r=e.call(this,t)||this).state={worldData:null,members:null,markers:null},r.focusedMarker=null,r.handleCountryMove=r.handleCountryMove.bind(E(E(r))),r.handleCountryLeave=r.handleCountryLeave.bind(E(E(r))),r.handleMarkerMove=r.handleMarkerMove.bind(E(E(r))),r.handleMarkerLeave=r.handleMarkerLeave.bind(E(E(r))),r.handleMarkerClick=r.handleMarkerClick.bind(E(E(r))),r.handleOutsideMarkerClick=r.handleOutsideMarkerClick.bind(E(E(r))),r}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var o=n.prototype;return o.componentDidMount=function(){var e=this;(O=O||fetch(j).then(function(e){return e.json()})).then(function(t){e.setState({worldData:t})}),(x=x||fetch(_).then(function(e){return e.json()})).then(function(t){e.setState(function(e){return e.worldData?null:{worldData:t}})}),(C=C||fetch(R).then(function(e){return e.json()})).then(function(t){e.setState({members:t,markers:t.filter(function(e){return e.isChapter}).sort(function(e,t){return e.lat<t.lat?1:e.lat>t.lat?-1:e.lng<t.lng?1:e.lng>t.lng?-1:0}).map(function(e){return{name:e.location,coordinates:[e.lng,e.lat],data:e}})})}),window.addEventListener("click",this.handleOutsideMarkerClick)},o.componentWillUnmount=function(){window.removeEventListener("click",this.handleOutsideMarkerClick)},o.handleCountryMove=function(e,t){this.focusedMarker||this.dispatchTooltip(t,e.properties.NAME_LONG)},o.handleCountryLeave=function(){this.focusedMarker||this.hideTooltip()},o.handleMarkerMove=function(e,t){this.focusedMarker||this.dispatchTooltip(t,e.name)},o.handleMarkerLeave=function(){this.focusedMarker||this.hideTooltip()},o.handleMarkerClick=function(e,t,r){if(r.stopPropagation(),r.nativeEvent.stopImmediatePropagation(),this.focusedMarker=this.focusedMarker===e?null:e,this.focusedMarker){var n=e.data,a=n.location,o=n.chapterInfo,i=a;if(o){var c=o.description,l=o.applicationLink,s=o.twitter,u=o.email,p=o.website;i="<h3>"+a+"</h3>",c&&(i+="<p>"+c+"</p>"),(s||u||p)&&(i+="<p>"),s&&(i+='\n            <strong>Twitter:</strong>\n            <a href="https://twitter.com/'+s+'">\n              @'+s+"\n            </a>\n            <br />\n          "),u&&(i+='\n            <strong>Email:</strong>\n            <a href="mailto:'+u+'">\n              '+u+"\n            </a>\n            <br />\n          "),p&&(i+='\n            <strong>Website:</strong>\n            <a href="'+(0===p.indexOf("http")?"":"http://")+p+'">\n              '+p+"\n            </a>\n            <br />\n          "),(s||u||p)&&(i+="</p>"),l&&(i+='\n            <p>\n              <a href="'+l+'">\n                Apply here!\n              </a>\n            </p>\n          '),i='<div class="'+this.props.tooltipClassName+'">'+i+"</div>"}this.dispatchTooltip(r,i)}else this.hideTooltip()},o.handleOutsideMarkerClick=function(){this.hideTooltip()},o.dispatchTooltip=function(e,t){var r=e.clientX,n=e.clientY+window.pageYOffset;this.props.dispatch(u.actions.show({origin:{x:r,y:n},content:t}))},o.hideTooltip=function(){var e=this;this.props.dispatch(u.actions.hide()),Promise.resolve().then(function(){e.focusedMarker=null})},o.render=function(){var e=this,t=this.props,r=t.centerLat,n=t.centerLng,o=t.width,i=t.height,l=t.scale,s=t.isGeographyIncluded,p=t.markerScale,d=t.style,h=t.className,m=t.forceGrayscale,y=t.zoom,v=t.enablePanning,b=t.projection,k=this.state,w=k.worldData,E=k.members,O=k.markers,x=!(w&&E&&O);return a.a.createElement("div",{className:h,style:M({},d||{},{width:o,height:i})},x&&a.a.createElement("div",null,"Loading..."),!x&&a.a.createElement(a.a.Fragment,null,a.a.createElement(c.ComposableMap,{projection:b,projectionConfig:{scale:l},width:o,height:i,style:{width:"100%",height:"auto",backgroundColor:"#fff"}},a.a.createElement(f,{forceGrayscale:m},a.a.createElement(c.ZoomableGroup,{center:[n,r],disablePanning:!v,zoom:y},a.a.createElement(c.Geographies,{geography:this.state.worldData},function(t,r){return t.filter(s).map(function(t,n){var o=E.some(function(e){return function(e,t){return q.some(function(r){return e.properties[r]===t})}(t,e.country)}),i={fill:o?"url(#redpattern)":"url(#hardlyredpattern)",stroke:"#222",strokeWidth:.5/y,outline:"none"};return a.a.createElement(c.Geography,{key:n,geography:t,projection:r,style:{default:i,hover:i,pressed:i},onMouseMove:o&&e.handleCountryMove,onMouseLeave:o&&e.handleCountryLeave})})}),a.a.createElement(c.Markers,null,O.map(function(t){return a.a.createElement(g,{key:t.name,marker:t,scale:p,onClick:e.handleMarkerClick,onMouseMove:e.handleMarkerMove,onMouseLeave:e.handleMarkerLeave})}))))),a.a.createElement(u.Tooltip,null)))},n}(n.PureComponent);(L=s()(function(e){return void 0===e&&(e={appReducer:b}),Object(v.createStore)(Object(v.combineReducers)({appReducer:k,tooltip:u.reducer}),e,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__())})(L)).displayName="ChapterMapComponent",L.propTypes={centerLat:i.a.number.isRequired,centerLng:i.a.number.isRequired,width:i.a.number.isRequired,height:i.a.number.isRequired,scale:i.a.number.isRequired,isGeographyIncluded:i.a.func.isRequired,markerScale:i.a.number.isRequired,forceGrayscale:i.a.bool.isRequired,tooltipClassName:i.a.string.isRequired,zoom:i.a.number.isRequired,enablePanning:i.a.bool.isRequired,projection:i.a.string},L.defaultProps={centerLat:0,centerLng:0,width:980,height:551,scale:205,isGeographyIncluded:function(){return!0},markerScale:.09,forceGrayscale:!1,tooltipClassName:"gwu_chapter_tooltip",zoom:1,enablePanning:!1,projection:"times"};var T=L;t.default=T}]).default});
//# sourceMappingURL=chapter-map-component.min.js.map